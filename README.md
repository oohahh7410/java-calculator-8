# 문자열 덧셈 계산기

문자열 속에 숨겨진 숫자들을 찾아 꺼내 합을 구하는 프로그램입니다.
쉼표(,)나 콜론(:)으로 구분된 기본 입력은 물론, 사용자가 직접 정의한 구분자도 인식할 수 있습니다.

---

## 주요 기능

**입력 처리**
- `Console.readLine()`으로 사용자 입력
- `null`이나 빈 문자열은 `0` 반환
- 공백만 있는 경우도 빈 문자열로 처리

**구분자 처리**
- 기본 구분자(`,`, `:`) 지원
- 커스텀 구분자(`//구분자\n숫자들`) 형식
- 특수문자(`*`, `+` 등)도 `Pattern.quote()`로 안전하게 처리
- 커스텀 구분자와 기본 구분자(, :)를 함께 사용할 수 있음 (예: //^\n5^2:5)
- 숫자는 커스텀 구분자로 사용할 수 없음 (예: //6\n56 → 예외 발생)

**숫자 변환 및 검증**
- 문자열을 정수 배열로 변환
- 빈 토큰, 숫자 외 값, 음수 모두 예외 처리
- 음수는 모두 수집해서 한 번에 표시
- 모든 검증을 통과한 숫자들의 합을 계산해 출력

---

## 실행 예시

```
덧셈할 문자열을 입력해 주세요.
3,2:5
결과 : 10
```

```
덧셈할 문자열을 입력해 주세요.
//;\n1;2;4
결과 : 7
```

```
덧셈할 문자열을 입력해 주세요.
-5,2,-3
잘못된 입력: 음수는 허용되지 않습니다: -5, -3
```

---

## 코드 구조

처음엔 `Application` 하나에 모든 기능을 넣었지만, 점점 구조를 나누는 게
낫겠다는 생각이 들었습니다. 그래서 입력, 계산, 출력을 각각의 책임으로
분리해봤습니다.

- `Application`: 전체 흐름 제어
- `view/InputView`: 사용자 입력
- `view/OutputView`: 결과 출력
- `service/CalculatorService`: 파싱 및 계산
- `domain/NumberParser`: 숫자 변환 및 검증
- `util/StringUtils`: 공통 문자열 검증

---

## 구현하면서 고민했던 부분

### 예외 메시지를 얼마나 친절하게 보여줄까
처음엔 그냥 `"잘못된 입력"`이라고만 표시했습니다.  
그런데 막상 써보니 사용자가 어떤 부분이 잘못됐는지 전혀 알 수 없어 보였습니다.  
그래서 음수 입력이 들어오면 해당 음수들을 모두 모아서 함께 보여주기로 했습니다.

### 책임을 나누는 과정
입력부터 출력까지 전부 한 파일에 있던 코드를 분리하는 게 처음엔 더 어렵게 느껴졌습니다.  
하지만 분리하고 나니 테스트하기도 수정하기도 훨씬 수월했습니다.  
특히 콘솔 입출력에 의존하지 않게 되면서 나중에 웹이나 파일 입력으로 바꿔도 구조를 그대로 활용할 수 있을 것 같았습니다.

### 커스텀 구분자에서의 시행착오
커스텀 구분자 기능을 추가했을 때 `split()`이 자꾸 깨져서 한참 원인을 찾았습니다.  
알고 보니 `*`, `+` 같은 특수문자가 정규식으로 해석되고 있던 거였죠.  
`Pattern.quote()`를 쓰고 나서야 문제없이 동작했습니다.  
이 경험으로 작동하는 코드와 안전한 코드는 다르다는 걸 배웠습니다.

### 개행 문자 처리의 함정
커스텀 구분자 테스트가 계속 실패해서 원인을 찾는 데 꽤 오래 걸렸습니다.
콘솔 입력에서는 실제 개행(\n)이 들어오지만, 테스트 문자열은 리터럴(\\n)이 들어왔던 것이습니다.
개행 문자를 replaceAll("\\r\\n|\\r|\\n", "\n")로 정규화하여 해결했습니다.
이 경험을 통해 입력 환경에 따라 문자열이 다르게 들어올 수 있다는 점을 배웠습니다.

---

## 배운 점

이번 과제를 통해 코드가 길어질수록 구조적으로 **쉽게 읽히는 코드**가 중요하다는 걸 많이 느꼈습니다.  
변수명 하나, 메서드 이름 하나를 정할 때마다 어떤 표현이 더 직관적인가를 많이 생각했습니다.  
그 과정이 시간은 더 걸렸지만 누가 봐도 바로 어떤 역할인지 알아챌 가능성을 높였다고 생각합니다.

코드를 다 만든 뒤 테스트를 작성하면서 **TDD의 필요성**을 실감했습니다.  
다음엔 구현보다 테스트를 먼저 써보고 싶습니다.  
테스트가 있으면 리팩토링도 훨씬 마음 편하게 할 수 있을 것 같습니다.

마지막으로 **작은 단위로 커밋하는 습관**의 중요성도 느꼈습니다.  
한 번에 여러 기능을 커밋했을 땐 뭐가 바뀐 건지 찾기가 힘들었는데  
작은 단위로 나누니 변경 이력이 깔끔하고 문제 원인도 빠르게 추적할 수 있었습니다.