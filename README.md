# 문자열 덧셈 계산기

문자열로 입력된 숫자들을 구분자로 분리하여 합계를 계산하는 프로그램입니다.

기본 구분자(쉼표, 콜론) 외에 커스텀 구분자도 지정할 수 있습니다.

---

## 구현 기능 목록

### 입력 처리
- [x] 사용자로부터 문자열 입력 받기 (`Console.readLine` 사용)
- [x] null이나 빈 문자열 입력 시 0 반환
- [x] 공백만 있는 문자열도 빈 문자열로 처리

### 구분자 처리
- [x] 기본 구분자(쉼표, 콜론)로 문자열 분리
- [x] 커스텀 구분자 지원: `//구분자\n숫자들` 형식 파싱
- [x] 특수문자 구분자 안전하게 처리 (`Pattern.quote` 사용)
- [x] 잘못된 커스텀 구분자 형식 검증

### 숫자 변환 및 검증
- [x] 문자열 토큰을 정수 배열로 변환
- [x] 빈 토큰(구분자만 연속된 경우) 예외 처리
- [x] 숫자가 아닌 값 입력 시 예외 발생
- [x] 음수 입력 시 모든 음수를 수집하여 예외 메시지에 포함

### 계산 및 출력
- [x] 유효한 숫자들의 합계 계산
- [x] 결과 출력

---

## 실행 예시

**정상 입력**
덧셈할 문자열을 입력해 주세요.  
1,2:3  
결과 : 6

**커스텀 구분자**
덧셈할 문자열을 입력해 주세요.  
//;\n1;2;3  
결과 : 6

**예외 상황**
덧셈할 문자열을 입력해 주세요.  
-1,2,-3  
잘못된 입력: 음수는 허용되지 않습니다: -1, -3

---

## 코드 구조

MVC 패턴을 적용하여 `view`, `service`, `domain`으로 책임을 분리했습니다.

- `Application.java`: 프로그램의 실행을 시작하고, `InputView`, `CalculatorService`, `OutputView`를 연결(지휘)합니다.
- `view/InputView.java`: 사용자의 입력을 받는 책임을 가집니다.
- `view/OutputView.java`: 계산 결과 또는 예외 메시지를 출력하는 책임을 가집니다.
- `service/CalculatorService.java`: 계산 로직의 전체 흐름(구분자 추출, 합계 계산)을 관리합니다.
- `domain/NumberParser.java`: 문자열 배열을 숫자 배열로 변환하고 검증하는 책임을 가집니다.
- `util/StringUtils.java`: 공통 문자열 검증(null, empty)을 담당하는 유틸리티 클래스입니다.

---

## 구현하면서 고민한 부분

**1. 예외 메시지 상세화**  
처음엔 단순히 `"잘못된 입력"`이라고만 표시했는데, 사용자가 어떤 값이 문제인지 알 수 없다는 걸 깨달았습니다.  
그래서 음수의 경우 모든 음수를 수집해서 보여주고, 형식 오류의 경우도 문제가 된 값을 명시하도록 개선했습니다.

**2. 책임 분리 (View 분리)**  
처음엔 `Application`에 입력, 계산, 출력 로직을 모두 넣었습니다. 하지만 `InputView`, `OutputView`, `CalculatorService`로 책임을 분리하니(MVC 패턴 적용), `Service`는 '콘솔'의 존재를 몰라도 되게 되었습니다. 덕분에 `Service`를 테스트하기 훨씬 쉬워졌습니다.

**3. `Pattern.quote()`의 필요성**  
커스텀 구분자로 `*`나 `+` 같은 정규표현식 특수문자가 들어올 때 `split`이 제대로 동작하지 않았습니다.  
`Pattern.quote()`를 사용하면 특수문자를 리터럴로 처리해 안전하게 분리할 수 있었습니다.

**4. 음수를 `sum`에 더하는 것**  
음수를 발견하면 어차피 예외가 발생하는데 `sum`에 더하는 게 의미가 있을까 고민했습니다.  
하지만 루프를 두 번 도는 것보다 한 번에 처리하는 게 더 간결하다고 판단했습니다.

---

## 배운 점 (회고)

### 테스트 주도 개발의 중요성
기능을 먼저 구현하고 테스트를 작성하니 놓친 예외 케이스가 많았습니다. 다음엔 테스트를 먼저 작성하고 구현하는 방식을 시도해보고 싶습니다.

### 작은 단위로 커밋하기
처음엔 여러 기능을 한 번에 커밋했는데, 나중에 특정 변경사항을 찾기 어려웠습니다. 기능 목록 단위로 커밋하니 히스토리가 훨씬 깔끔해졌습니다.

### 책임에 따른 구조 분리
처음엔 `Application`에 입력, 계산, 출력을 모두 넣었습니다. 하지만 리팩토링하며 `InputView`, `CalculatorService`, `OutputView`로 분리하니 각 클래스가 하나의 역할만 담당하게 되었습니다. 덕분에 "이 기능은 어디서 테스트하지?"라는 고민이 사라졌고, 나중에 콘솔이 아닌 다른 입출력 방식으로 바꾸기도 쉬울 것 같습니다.

### 읽기 좋은 코드 작성
변수명과 메서드명을 고민하는 시간이 구현 시간만큼 걸렸습니다. 하지만 명확한 이름을 붙이니 주석 없이도 코드가 읽혔습니다. "코드는 읽히기 위해 작성한다"는 말을 실감했습니다.
